<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=0.5,minimum-scale=0.5,maximum-scale=2.0,user-scalable=yes">
		<title></title>
		<style>
      body {
        background : #444;
      }
		</style>
	</head>
	<body>
		<script src="three.js"></script>
    <script src="Viewer.js"></script>
    <script src="ColorPicker.js"></script>
		<script>
      updateFunctions = [];
      function update(){
        for( var i=0; i<updateFunctions.length; i++ ){
          updateFunctions[ i ]();
        }

        requestAnimationFrame( update );
      }
      update();

			resizeFunctions = [];
			function resize(){
				for( var i=0; i<resizeFunctions.length; i++ ){
					resizeFunctions[ i ]();
				}
			}
			window.onresize = resize;

			keydownFunctions = [];
			function keydown( _e ){
				for( var i=0; i<keydownFunctions.length; i++ ){
					keydownFunctions[ i ]( _e );
				}
			}
			window.addEventListener( 'keydown', keydown );

			keyupFunctions = [];
			function keyup( _e ){
				for( var i=0; i<keyupFunctions.length; i++ ){
					keyupFunctions[ i ]( _e );
				}
			}
			window.addEventListener( 'keyup', keyup );

			viewer = new Viewer();
			document.body.appendChild( viewer.canvas );
      updateFunctions.push( function(){ viewer.update(); } );
      keydownFunctions.push( function( _e ){ viewer.keydown( _e ); } );
      keyupFunctions.push( function( _e ){ viewer.keyup( _e ); } );

      colorPicker = new ColorPicker();
			colorPicker.canvas.style.position = 'absolute';
			colorPicker.setSize( 48 );
      document.body.appendChild( colorPicker.canvas );
      updateFunctions.push( function(){ colorPicker.update(); } );
      resizeFunctions.push( function(){ colorPicker.resize(); } );
			resizeFunctions.push( function(){
			} );
			colorPicker.onChange = function( _color ){
			};

			resize();
		</script>
	</body>
</html>
